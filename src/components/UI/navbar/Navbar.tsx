import React from 'react'
import styles from './Navbar.module.scss'
import { useLocation } from 'react-router-dom'

type TNavbarLinks = {
    link: string
    id: number
    svg: JSX.Element
    exact?: boolean
}

const navbarLinks: TNavbarLinks[] = [
    {
        link: '/',
        id: 1,
        svg: <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
            <path d="M2.91675 12.7615C2.91675 11.3333 3.57076 9.98368 4.69174 9.09869L11.1084 4.0329C12.8039 2.69439 15.1963 2.69439 16.8918 4.0329L23.3084 9.09869C24.4294 9.98368 25.0834 11.3333 25.0834 12.7615V20.4167C25.0834 22.994 22.9941 25.0833 20.4167 25.0833H18.6667C18.0224 25.0833 17.5001 24.561 17.5001 23.9167V20.4167C17.5001 19.128 16.4554 18.0833 15.1667 18.0833H12.8334C11.5448 18.0833 10.5001 19.128 10.5001 20.4167V23.9167C10.5001 24.561 9.97775 25.0833 9.33342 25.0833H7.58342C5.00609 25.0833 2.91675 22.994 2.91675 20.4167L2.91675 12.7615Z" stroke="#8B31E5" stroke-width="1.75" />
        </svg>,
        exact: true
    },
    {
        link: '/games',
        id: 2,
        svg: <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
            <path d="M2.33325 11.6672C2.33325 8.21603 5.31302 5.51937 8.74702 5.86277L13.3034 6.31841C13.7666 6.36473 14.2332 6.36473 14.6964 6.31841L19.2528 5.86277C22.6868 5.51937 25.6666 8.21603 25.6666 11.6672V18.6666C25.6666 22.8587 20.188 24.4476 17.945 20.9061C16.3463 18.3818 12.6936 18.2975 10.9801 20.7453L10.6485 21.219C8.08577 24.8801 2.33325 23.0668 2.33325 18.5979V11.6672Z" stroke="white" stroke-width="1.75" />
            <circle cx="21.0001" cy="11.6382" r="1.51667" fill="white" />
            <circle cx="18.6668" cy="15.1383" r="1.4" fill="white" />
            <path d="M9.33325 15.7216L9.33325 11.0549" stroke="white" stroke-width="1.68" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M7.00008 13.3882H11.6667" stroke="white" stroke-width="1.68" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    },
    {
        link: '/store',
        id: 3,
        svg: <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
            <path d="M15.7502 24.5V15.75C15.7502 15.5179 15.8424 15.2954 16.0065 15.1313C16.1706 14.9672 16.3931 14.875 16.6252 14.875H20.1252C20.3573 14.875 20.5798 14.9672 20.7439 15.1313C20.908 15.2954 21.0002 15.5179 21.0002 15.75V24.5M15.7502 24.5H2.75355M15.7502 24.5H21.0002M21.0002 24.5H25.2469M23.6252 24.5V10.9072M23.6252 10.9072C22.9253 11.3109 22.1073 11.4602 21.3099 11.3297C20.5125 11.1991 19.7848 10.7967 19.2502 10.1908C18.6085 10.9165 17.6705 11.375 16.6252 11.375C16.1285 11.3755 15.6375 11.27 15.1848 11.0656C14.7321 10.8612 14.3283 10.5626 14.0002 10.1897C13.3585 10.9165 12.4205 11.375 11.3752 11.375C10.8785 11.3755 10.3875 11.27 9.93481 11.0656C9.48214 10.8612 9.07829 10.5626 8.75021 10.1897C8.21578 10.7958 7.48816 11.1983 6.69075 11.3291C5.89334 11.4599 5.07524 11.3108 4.37521 10.9072M23.6252 10.9072C24.0902 10.6387 24.4873 10.2669 24.7856 9.82043C25.0839 9.37397 25.2755 8.86487 25.3455 8.33251C25.4156 7.80015 25.3622 7.25881 25.1895 6.75039C25.0168 6.24197 24.7295 5.78009 24.3497 5.4005L22.9614 4.01333C22.6335 3.68505 22.1887 3.50041 21.7247 3.5H6.27455C5.81074 3.5001 5.36594 3.68431 5.03788 4.01217L3.65071 5.4005C3.27182 5.78053 2.98526 6.24249 2.81313 6.75077C2.64099 7.25905 2.58787 7.80007 2.65788 8.33212C2.72788 8.86417 2.91912 9.37304 3.21687 9.8195C3.51462 10.266 3.91092 10.6381 4.37521 10.9072M4.37521 24.5V10.9072M7.87521 21H12.2502C12.4823 21 12.7048 20.9078 12.8689 20.7437C13.033 20.5796 13.1252 20.3571 13.1252 20.125V15.75C13.1252 15.5179 13.033 15.2954 12.8689 15.1313C12.7048 14.9672 12.4823 14.875 12.2502 14.875H7.87521C7.64315 14.875 7.42059 14.9672 7.25649 15.1313C7.0924 15.2954 7.00021 15.5179 7.00021 15.75V20.125C7.00021 20.608 7.39221 21 7.87521 21Z" stroke="white" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    }, {
        link: '/events',
        id: 4,
        svg: <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
            <path d="M10.5 14H14.875M10.5 17.5H14.875M10.5 21H14.875M18.375 21.875H21C21.6962 21.875 22.3639 21.5984 22.8562 21.1062C23.3484 20.6139 23.625 19.9462 23.625 19.25V7.126C23.625 5.80183 22.6392 4.67833 21.3197 4.56867C20.8833 4.53248 20.4466 4.50137 20.0095 4.47533M20.0095 4.47533C20.0869 4.72627 20.1251 4.9874 20.125 5.25C20.125 5.48206 20.0328 5.70462 19.8687 5.86872C19.7046 6.03281 19.4821 6.125 19.25 6.125H14C13.517 6.125 13.125 5.733 13.125 5.25C13.125 4.9805 13.1658 4.72033 13.2417 4.47533M20.0095 4.47533C19.6793 3.40433 18.6807 2.625 17.5 2.625H15.75C15.1891 2.62513 14.643 2.80484 14.1916 3.1378C13.7403 3.47076 13.4074 3.93948 13.2417 4.47533M13.2417 4.47533C12.803 4.50217 12.3667 4.53367 11.9303 4.56867C10.6108 4.67833 9.625 5.80183 9.625 7.126V9.625M9.625 9.625H5.6875C4.963 9.625 4.375 10.213 4.375 10.9375V24.0625C4.375 24.787 4.963 25.375 5.6875 25.375H17.0625C17.787 25.375 18.375 24.787 18.375 24.0625V10.9375C18.375 10.213 17.787 9.625 17.0625 9.625H9.625ZM7.875 14H7.88433V14.0093H7.875V14ZM7.875 17.5H7.88433V17.5093H7.875V17.5ZM7.875 21H7.88433V21.0093H7.875V21Z" stroke="white" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    },
    {
        link: '/cases',
        id: 5,
        svg: <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
            <path d="M4.66675 9.33325H23.3334V20.9999C23.3334 22.2886 22.2887 23.3333 21.0001 23.3333H7.00008C5.71141 23.3333 4.66675 22.2886 4.66675 20.9999V9.33325Z" stroke="white" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M9.33342 4.66675H18.6667L23.3334 9.33342H4.66675L9.33342 4.66675Z" stroke="white" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M9.33325 14H13.9999" stroke="white" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    }
]

const Navbar: React.FC = () => {
    const location = useLocation()

    const isActive = (link: TNavbarLinks): boolean => {
        if (link.exact) {
            return location.pathname === link.link
        }

        return location.pathname.startsWith(link.link || 'guns')
    }

    const isNavbarVisible = navbarLinks.some((link) => isActive(link)) || location.pathname.includes('guns');

    return (
        isNavbarVisible && (
            <div className={`flex ${styles.navbar}`}>
                {navbarLinks.map((navbarLink) => (
                    <a
                        key={navbarLink.id}
                        href={navbarLink.link}
                        className={`flex align__center justify__center ${styles.navbarLinkCard} ${isActive(navbarLink) ? styles.active : ''
                            }`}
                    >
                        {React.cloneElement(navbarLink.svg)}
                    </a>
                ))}
            </div>
        )
    )
}

export default Navbar